<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8" />
    <title>Iniciar Sesión – SOA</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Iconos -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

    <!-- Estilos propios -->
    <link rel="stylesheet" href="css/style.css"/>

    <style>
        body{
            background: var(--bg, #f5f7fb);
            transition: background .3s ease;
        }
        [data-theme="dark"] body{
            --bg: #121212;
        }

        .login-card {
            backdrop-filter: blur(12px);
            animation: fadeIn .3s ease;
        }

        @keyframes fadeIn {
            from {opacity:0; transform:scale(.96);}
            to   {opacity:1; transform:scale(1);}
        }

        .login-card input:focus{
            box-shadow: 0 0 0 .15rem rgba(13,110,253,.25);
        }
    </style>

</head>

<body onload="loadTheme()">

<div class="min-vh-100 d-flex align-items-center justify-content-center px-2">

    <div class="login-card p-4 shadow-lg rounded-4 bg-body" style="width: 420px;">

        <h3 class="text-center mb-1 fw-bold">Sistema de Gestión</h3>
        <p class="text-center text-muted">Cursos y Estudiantes</p>

        <form id="formLogin" onsubmit="login(event)">

            <label class="mt-2 fw-semibold">Usuario</label>
            <input class="form-control rounded-3" required name="usuario" placeholder="Usuario" autocomplete="username"/>

            <label class="mt-3 fw-semibold">Contraseña</label>
            <input class="form-control rounded-3" required name="clave" type="password" placeholder="Contraseña" autocomplete="current-password"/>

            <button id="btnLogin" class="btn btn-primary w-100 mt-4 rounded-3">
                <i class="fa-solid fa-right-to-bracket"></i> Ingresar
            </button>
        </form>

        <button onclick="toggleTheme()" class="btn btn-outline-secondary w-100 mt-3 rounded-3">
            <i class="fa-solid fa-moon"></i> Tema
        </button>

        <p class="text-center mt-4 text-muted small mb-0">
            © 2025 - Gestión Académica
        </p>

    </div>

</div>


<!-- SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Script propio -->
<script src="js/app.js"></script>

<script>
    // Animación botón login
    function setLoading(state){
        const btn = document.getElementById("btnLogin");
        if(!btn) return;

        if(state){
            btn.disabled = true;
            btn.innerHTML = `<span class="spinner-border spinner-border-sm me-2"></span>Ingresando...`;
        } else {
            btn.disabled = false;
            btn.innerHTML = `<i class="fa-solid fa-right-to-bracket"></i> Ingresar`;
        }
    }

    // Hook con tu login original
    const originalLogin = login;

    login = async function(e){
        setLoading(true);
        try{
            await originalLogin(e);
        }finally{
            setLoading(false);
        }
    }
</script>

</body>
</html>
